
# undo 



# undo log 的删除


    支持MVCC，对于delete mark操作来说，仅仅是在记录上打一个删除标记，并没有真正将它删除掉。


    随着系统的运行，在确定系统中包含最早产生的那个ReadView的事务不会再访问某些update undo日志以及被打了删除标记的记录后，
    有一个后台运行的purge线程会把它们真正的删除掉
    
    
    系统会判断，当没有事务再需要用到这些回滚日志时，回滚日志会被删除。
    什么时候才不需要了呢？就是当系统里没有比这个回滚日志更早的read-view的时候。


# 长事务

    不要使用长事务。
    长事务意味着系统里面会存在很老的事务视图。
    由于这些事务随时可能访问数据库里面的任何数据，
    所以这个事务提交之前，数据库里面它可能用到的回滚记录都必须保留，这就会导致大量占用存储空间

