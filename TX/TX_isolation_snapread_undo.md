
# undo log 的删除

    为了支持快照读，对于delete mark操作来说，仅仅是在记录上打一个删除标记，并没有真正将它删除掉。

    当系统里没有比这个回滚日志更早的read-view的时候

    有一个后台运行的purge线程会把它们真正的删除掉

# 长事务

    长事务意味着系统里面会存在很老的事务视图。
    由于这些事务随时可能访问数据库里面的任何数据，
    所以这个事务提交之前，数据库里面它可能用到的回滚记录都必须保留，这就会导致大量占用存储空间

    可重复读级别只在第一次快照读的时候生成一个视图
    直到事务提交视图才会被废弃，会导致需要保存更久的undo日志
    提交读级别在每次快照读时都生成一个视图
    能够让undo日志更快的被清理