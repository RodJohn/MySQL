
# 幻读
定义

    幻读指的是一个事务在前后两次查询同一个范围的时候，后一次查询看到了前一次查询没有看到的行。 
    在可重复读隔离级别下，普通的查询是快照读，是不会看到别的事务插入的数据的。因此，幻读在“当前读”下才会出现。  


图例

    快照读看不到
    
    
    
# 问题

    首先是语义上的
 
    
 # next-key lock

间隙锁
    
    间隙锁(Gap Lock)能够锁住记录之间的“间隙”。
    跟间隙锁存在冲突关系的，是“往这个间隙中插入一个记录”这个操作
    
next-key lock
    
    间隙锁和行锁合称next-key lock
    它既能保护该条记录，又能阻止别的事务将新记录插入被保护记录前边的间隙。
    

        
# 影响



示例


 
 
 
 
 
    